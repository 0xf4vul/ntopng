(function(){"use strict";var t=this;var e;if(typeof exports!=="undefined"){e=exports}else{e=t.Springy={}}var i=e.Graph=function(){this.nodeSet={};this.nodes=[];this.edges=[];this.adjacency={};this.nextNodeId=0;this.nextEdgeId=0;this.eventListeners=[]};var a=e.Node=function(t,e){this.id=t;this.data=e!==undefined?e:{}};var n=e.Edge=function(t,e,i,a){this.id=t;this.source=e;this.target=i;this.data=a!==undefined?a:{}};i.prototype.addNode=function(t){if(!(t.id in this.nodeSet)){this.nodes.push(t)}this.nodeSet[t.id]=t;this.notify();return t};i.prototype.addNodes=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];var i=new a(e,{label:e});this.addNode(i)}};i.prototype.addEdge=function(t){var e=false;this.edges.forEach(function(i){if(t.id===i.id){e=true}});if(!e){this.edges.push(t)}if(!(t.source.id in this.adjacency)){this.adjacency[t.source.id]={}}if(!(t.target.id in this.adjacency[t.source.id])){this.adjacency[t.source.id][t.target.id]=[]}e=false;this.adjacency[t.source.id][t.target.id].forEach(function(i){if(t.id===i.id){e=true}});if(!e){this.adjacency[t.source.id][t.target.id].push(t)}this.notify();return t};i.prototype.addEdges=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];var i=this.nodeSet[e[0]];if(i==undefined){throw new TypeError("invalid node name: "+e[0])}var a=this.nodeSet[e[1]];if(a==undefined){throw new TypeError("invalid node name: "+e[1])}var n=e[2];this.newEdge(i,a,n)}};i.prototype.addNodes2=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];var i=new a(e.label,e);this.addNode(i)}};i.prototype.addEdges2=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];var i=this.nodeSet[e.source];if(i==undefined){throw new TypeError("invalid node name: "+e.source)}var a=this.nodeSet[e.target];if(a==undefined){throw new TypeError("invalid node name: "+e.target)}var n=e.attributes;this.newEdge(i,a,n)}};i.prototype.newNode=function(t){var e=new a(this.nextNodeId++,t);this.addNode(e);return e};i.prototype.newEdge=function(t,e,i){var a=new n(this.nextEdgeId++,t,e,i);this.addEdge(a);return a};i.prototype.loadJSON=function(t){if(typeof t=="string"||t instanceof String){t=JSON.parse(t)}if("nodes"in t||"edges"in t){this.addNodes2.apply(this,t["nodes"]);this.addEdges2.apply(this,t["edges"])}};i.prototype.getEdges=function(t,e){if(t.id in this.adjacency&&e.id in this.adjacency[t.id]){return this.adjacency[t.id][e.id]}return[]};i.prototype.removeNode=function(t){if(t.id in this.nodeSet){delete this.nodeSet[t.id]}for(var e=this.nodes.length-1;e>=0;e--){if(this.nodes[e].id===t.id){this.nodes.splice(e,1)}}this.detachNode(t)};i.prototype.detachNode=function(t){var e=this.edges.slice();e.forEach(function(e){if(e.source.id===t.id||e.target.id===t.id){this.removeEdge(e)}},this);this.notify()};i.prototype.removeEdge=function(t){for(var e=this.edges.length-1;e>=0;e--){if(this.edges[e].id===t.id){this.edges.splice(e,1)}}for(var i in this.adjacency){for(var a in this.adjacency[i]){var n=this.adjacency[i][a];for(var r=n.length-1;r>=0;r--){if(this.adjacency[i][a][r].id===t.id){this.adjacency[i][a].splice(r,1)}}if(this.adjacency[i][a].length==0){delete this.adjacency[i][a]}}if(l(this.adjacency[i])){delete this.adjacency[i]}}this.notify()};i.prototype.merge=function(t){var e=[];t.nodes.forEach(function(t){e.push(this.addNode(new a(t.id,t.data)))},this);t.edges.forEach(function(t){var i=e[t.from];var a=e[t.to];var r=t.directed?r=t.type+"-"+i.id+"-"+a.id:i.id<a.id?t.type+"-"+i.id+"-"+a.id:t.type+"-"+a.id+"-"+i.id;var o=this.addEdge(new n(r,i,a,t.data));o.data.type=t.type},this)};i.prototype.filterNodes=function(t){var e=this.nodes.slice();e.forEach(function(e){if(!t(e)){this.removeNode(e)}},this)};i.prototype.filterEdges=function(t){var e=this.edges.slice();e.forEach(function(e){if(!t(e)){this.removeEdge(e)}},this)};i.prototype.addGraphListener=function(t){this.eventListeners.push(t)};i.prototype.notify=function(){this.eventListeners.forEach(function(t){t.graphChanged()})};var r=e.Layout={};r.ForceDirected=function(t,e,i,a){this.graph=t;this.stiffness=e;this.repulsion=i;this.damping=a;this.nodePoints={};this.edgeSprings={}};r.ForceDirected.prototype.point=function(t){if(!(t.id in this.nodePoints)){var e=t.data.mass!==undefined?t.data.mass:1;this.nodePoints[t.id]=new r.ForceDirected.Point(s.random(),e)}return this.nodePoints[t.id]};r.ForceDirected.prototype.spring=function(t){if(!(t.id in this.edgeSprings)){var e=t.data.length!==undefined?t.data.length:1;var i=false;var a=this.graph.getEdges(t.source,t.target);a.forEach(function(t){if(i===false&&t.id in this.edgeSprings){i=this.edgeSprings[t.id]}},this);if(i!==false){return new r.ForceDirected.Spring(i.point1,i.point2,0,0)}var n=this.graph.getEdges(t.target,t.source);a.forEach(function(t){if(i===false&&t.id in this.edgeSprings){i=this.edgeSprings[t.id]}},this);if(i!==false){return new r.ForceDirected.Spring(i.point2,i.point1,0,0)}this.edgeSprings[t.id]=new r.ForceDirected.Spring(this.point(t.source),this.point(t.target),e,this.stiffness)}return this.edgeSprings[t.id]};r.ForceDirected.prototype.eachNode=function(t){var e=this;this.graph.nodes.forEach(function(i){t.call(e,i,e.point(i))})};r.ForceDirected.prototype.eachEdge=function(t){var e=this;this.graph.edges.forEach(function(i){t.call(e,i,e.spring(i))})};r.ForceDirected.prototype.eachSpring=function(t){var e=this;this.graph.edges.forEach(function(i){t.call(e,e.spring(i))})};r.ForceDirected.prototype.applyCoulombsLaw=function(){this.eachNode(function(t,e){this.eachNode(function(t,i){if(e!==i){var a=e.p.subtract(i.p);var n=a.magnitude()+.1;var r=a.normalise();e.applyForce(r.multiply(this.repulsion).divide(n*n*.5));i.applyForce(r.multiply(this.repulsion).divide(n*n*-.5))}})})};r.ForceDirected.prototype.applyHookesLaw=function(){this.eachSpring(function(t){var e=t.point2.p.subtract(t.point1.p);var i=t.length-e.magnitude();var a=e.normalise();t.point1.applyForce(a.multiply(t.k*i*-.5));t.point2.applyForce(a.multiply(t.k*i*.5))})};r.ForceDirected.prototype.attractToCentre=function(){this.eachNode(function(t,e){var i=e.p.multiply(-1);e.applyForce(i.multiply(this.repulsion/50))})};r.ForceDirected.prototype.updateVelocity=function(t){this.eachNode(function(e,i){i.v=i.v.add(i.a.multiply(t)).multiply(this.damping);i.a=new s(0,0)})};r.ForceDirected.prototype.updatePosition=function(t){this.eachNode(function(e,i){i.p=i.p.add(i.v.multiply(t))})};r.ForceDirected.prototype.totalEnergy=function(t){var e=0;this.eachNode(function(t,i){var a=i.v.magnitude();e+=.5*i.m*a*a});return e};var o=function(t,e){return function(){return t.apply(e,arguments)}};e.requestAnimationFrame=o(t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e,i){t.setTimeout(e,10)},t);r.ForceDirected.prototype.start=function(t,i,a){var n=this;if(this._started)return;this._started=true;this._stop=false;if(a!==undefined){a()}e.requestAnimationFrame(function a(){n.applyCoulombsLaw();n.applyHookesLaw();n.attractToCentre();n.updateVelocity(.03);n.updatePosition(.03);if(t!==undefined){t()}if(n._stop||n.totalEnergy()<.01){n._started=false;if(i!==undefined){i()}}else{e.requestAnimationFrame(a)}})};r.ForceDirected.prototype.stop=function(){this._stop=true};r.ForceDirected.prototype.nearest=function(t){var e={node:null,point:null,distance:null};var i=this;this.graph.nodes.forEach(function(a){var n=i.point(a);var r=n.p.subtract(t).magnitude();if(e.distance===null||r<e.distance){e={node:a,point:n,distance:r}}});return e};r.ForceDirected.prototype.getBoundingBox=function(){var t=new s(-2,-2);var e=new s(2,2);this.eachNode(function(i,a){if(a.p.x<t.x){t.x=a.p.x}if(a.p.y<t.y){t.y=a.p.y}if(a.p.x>e.x){e.x=a.p.x}if(a.p.y>e.y){e.y=a.p.y}});var i=e.subtract(t).multiply(.07);return{bottomleft:t.subtract(i),topright:e.add(i)}};var s=e.Vector=function(t,e){this.x=t;this.y=e};s.random=function(){return new s(10*(Math.random()-.5),10*(Math.random()-.5))};s.prototype.add=function(t){return new s(this.x+t.x,this.y+t.y)};s.prototype.subtract=function(t){return new s(this.x-t.x,this.y-t.y)};s.prototype.multiply=function(t){return new s(this.x*t,this.y*t)};s.prototype.divide=function(t){return new s(this.x/t||0,this.y/t||0)};s.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};s.prototype.normal=function(){return new s(-this.y,this.x)};s.prototype.normalise=function(){return this.divide(this.magnitude())};r.ForceDirected.Point=function(t,e){this.p=t;this.m=e;this.v=new s(0,0);this.a=new s(0,0)};r.ForceDirected.Point.prototype.applyForce=function(t){this.a=this.a.add(t.divide(this.m))};r.ForceDirected.Spring=function(t,e,i,a){this.point1=t;this.point2=e;this.length=i;this.k=a};var d=e.Renderer=function(t,e,i,a,n,r){this.layout=t;this.clear=e;this.drawEdge=i;this.drawNode=a;this.onRenderStop=n;this.onRenderStart=r;this.layout.graph.addGraphListener(this)};d.prototype.graphChanged=function(t){this.start()};d.prototype.start=function(t){var e=this;this.layout.start(function t(){e.clear();e.layout.eachEdge(function(t,i){e.drawEdge(t,i.point1.p,i.point2.p)});e.layout.eachNode(function(t,i){e.drawNode(t,i.p)})},this.onRenderStart,this.onRenderStop)};d.prototype.stop=function(){this.layout.stop()};if(!Array.prototype.forEach){Array.prototype.forEach=function(t,e){var i,a;if(this==null){throw new TypeError(" this is null or not defined")}var n=Object(this);var r=n.length>>>0;if({}.toString.call(t)!="[object Function]"){throw new TypeError(t+" is not a function")}if(e){i=e}a=0;while(a<r){var o;if(a in n){o=n[a];t.call(i,o,a,n)}a++}}}var l=function(t){for(var e in t){if(t.hasOwnProperty(e)){return false}}return true}}).call(this);(function(){jQuery.fn.springy=function(t){var e=this.graph=t.graph||new Springy.Graph;var i="16px Verdana, sans-serif";var a="8px Verdana, sans-serif";var n=t.stiffness||400;var r=t.repulsion||400;var o=t.damping||.5;var s=t.nodeSelected||null;var d={};var l=true;var f=this[0];var u=f.getContext("2d");var c=this.layout=new Springy.Layout.ForceDirected(e,n,r,o);var h=c.getBoundingBox();var p={bottomleft:new Springy.Vector(-2,-2),topright:new Springy.Vector(2,2)};Springy.requestAnimationFrame(function t(){p=c.getBoundingBox();h={bottomleft:h.bottomleft.add(p.bottomleft.subtract(h.bottomleft).divide(10)),topright:h.topright.add(p.topright.subtract(h.topright).divide(10))};Springy.requestAnimationFrame(t)});var v=function(t){var e=h.topright.subtract(h.bottomleft);var i=t.subtract(h.bottomleft).divide(e.x).x*f.width;var a=t.subtract(h.bottomleft).divide(e.y).y*f.height;return new Springy.Vector(i,a)};var g=function(t){var e=h.topright.subtract(h.bottomleft);var i=t.x/f.width*e.x+h.bottomleft.x;var a=t.y/f.height*e.y+h.bottomleft.y;return new Springy.Vector(i,a)};var y=null;var m=null;var b=null;jQuery(f).mousedown(function(t){var e=jQuery(this).offset();var i=g({x:t.pageX-e.left,y:t.pageY-e.top});y=m=b=c.nearest(i);if(y.node!==null){b.point.m=1e4;if(s){s(y.node)}}$.start()});jQuery(f).dblclick(function(t){var e=jQuery(this).offset();var i=g({x:t.pageX-e.left,y:t.pageY-e.top});y=c.nearest(i);node=y.node;if(node&&node.data&&node.data.ondoubleclick){node.data.ondoubleclick(node.data)}});jQuery(f).mousemove(function(t){var e=jQuery(this).offset();var i=g({x:t.pageX-e.left,y:t.pageY-e.top});m=c.nearest(i);if(b!==null&&b.node!==null){b.point.p.x=i.x;b.point.p.y=i.y}$.start()});jQuery(window).bind("mouseup",function(t){b=null});var w=function(t){var e=t.data.label!==undefined?t.data.label:t.id;if(t._width&&t._width[e])return t._width[e];u.save();u.font=t.data.font!==undefined?t.data.font:i;var a=u.measureText(e).width;u.restore();t._width||(t._width={});t._width[e]=a;return a};var x=function(t){return 16};var F=function(t){var e=t.data.image.width!==undefined?t.data.image.width:d[t.data.image.src].object.width;return e};var _=function(t){var e=t.data.image.height!==undefined?t.data.image.height:d[t.data.image.src].object.height;return e};Springy.Node.prototype.getHeight=function(){var t;if(this.data.image==undefined){t=x(this)}else{if(this.data.image.src in d&&d[this.data.image.src].loaded){t=_(this)}else{t=10}}return t};Springy.Node.prototype.getWidth=function(){var t;if(this.data.image==undefined){t=w(this)}else{if(this.data.image.src in d&&d[this.data.image.src].loaded){t=F(this)}else{t=10}}return t};var $=this.renderer=new Springy.Renderer(c,function t(){u.clearRect(0,0,f.width,f.height)},function t(i,n,r){var o=v(n).x;var s=v(n).y;var d=v(r).x;var f=v(r).y;var c=new Springy.Vector(d-o,f-s);var h=c.normal().normalise();var p=e.getEdges(i.source,i.target);var g=e.getEdges(i.target,i.source);var y=p.length+g.length;var m=0;for(var b=0;b<p.length;b++){if(p[b].id===i.id){m=b}}var w=12;var x=h.multiply(-((y-1)*w)/2+m*w);var F=6;var _=6;var $=v(n).add(x);var S=v(r).add(x);var A=i.target.getWidth()+F;var M=i.target.getHeight()+_;var k=E($,S,{x:d-A/2,y:f-M/2},A,M);if(!k){k=S}var T=i.data.color!==undefined?i.data.color:"#000000";var N;var B;var j=i.data.weight!==undefined?i.data.weight:1;u.lineWidth=Math.max(j*2,.1);N=1+u.lineWidth;B=8;var D=i.data.directional!==undefined?i.data.directional:true;var C;if(D){C=k.subtract(c.normalise().multiply(B*.5))}else{C=S}u.strokeStyle=T;u.beginPath();u.moveTo($.x,$.y);u.lineTo(C.x,C.y);u.stroke();if(D){u.save();u.fillStyle=T;u.translate(k.x,k.y);u.rotate(Math.atan2(f-s,d-o));u.beginPath();u.moveTo(-B,N);u.lineTo(0,0);u.lineTo(-B,-N);u.lineTo(-B*.8,-0);u.closePath();u.fill();u.restore()}if(i.data.label!==undefined){text=i.data.label;u.save();u.textAlign="center";u.textBaseline="top";u.font=i.data.font!==undefined?i.data.font:a;u.fillStyle=T;var R=Math.atan2(S.y-$.y,S.x-$.x);var I=-8;if(l&&(R>Math.PI/2||R<-Math.PI/2)){I=8;R+=Math.PI}var P=$.add(S).divide(2).add(h.multiply(I));u.translate(P.x,P.y);u.rotate(R);u.fillText(text,0,-2);u.restore()}},function t(e,a){var n=v(a);u.save();var r=6;var o=6;var s=e.getWidth();var l=e.getHeight();var f=s+r;var c=l+o;u.clearRect(n.x-f/2,n.y-c/2,f,c);if(y!==null&&y.node!==null&&y.node.id===e.id){u.fillStyle="#FFFFE0"}else if(m!==null&&m.node!==null&&m.node.id===e.id){u.fillStyle="#EEEEEE"}else{u.fillStyle="#FFFFFF"}u.fillRect(n.x-f/2,n.y-c/2,f,c);if(e.data.image==undefined){u.textAlign="left";u.textBaseline="top";u.font=e.data.font!==undefined?e.data.font:i;u.fillStyle="#000000";var h=e.data.label!==undefined?e.data.label:e.id;u.fillText(h,n.x-s/2,n.y-l/2);if(e.data.ip!==undefined){u.textBaseline="top";u.textAlign="center";u.font="8px Verdana, sans-serif";u.fillStyle="#000000";u.fillText(e.data.ip,n.x,n.y+l/2)}}else{var p=e.data.image.src;if(p in d){if(d[p].loaded){u.drawImage(d[p].object,n.x-s/2,n.y-l/2,s,l);if(e.data.ip!==undefined){u.textBaseline="top";u.textAlign="center";u.font="8px Verdana, sans-serif";u.fillStyle="#000000";u.fillText(e.data.ip,n.x,n.y+l/2)}}}else{d[p]={};var g=new Image;d[p].object=g;g.addEventListener("load",function(){d[p].loaded=true});g.src=p}}u.restore()});$.start();function S(t,e,i,a){var n=(a.y-i.y)*(e.x-t.x)-(a.x-i.x)*(e.y-t.y);if(n===0){return false}var r=((a.x-i.x)*(t.y-i.y)-(a.y-i.y)*(t.x-i.x))/n;var o=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/n;if(r<0||r>1||o<0||o>1){return false}return new Springy.Vector(t.x+r*(e.x-t.x),t.y+r*(e.y-t.y))}function E(t,e,i,a,n){var r={x:i.x,y:i.y};var o={x:i.x+a,y:i.y};var s={x:i.x,y:i.y+n};var d={x:i.x+a,y:i.y+n};var l;if(l=S(t,e,r,o)){return l}if(l=S(t,e,o,d)){return l}if(l=S(t,e,d,s)){return l}if(l=S(t,e,s,r)){return l}return false}return this}})();function datatableRemoveEmptyRow(t){$("tbody tr.emptyRow",$(t)).remove()}function datatableAddEmptyRow(t,e){var i=$("thead th",$(t)).filter(function(){return $(this).css("display")!="none"}).length;$("tbody",$(t)).html('<tr class="emptyRow"><td colspan="'+i+'"><i>'+e+"</i></td></tr>")}function datatableGetNumDisplayedItems(t){return $("tr:not(.emptyRow)",$(t)).length-1}function datatableIsEmpty(t){return datatableGetNumDisplayedItems(t)==0}function datatableGetTotalItems(t){if(datatableIsEmpty(t))return 0;return $("#dt-bottom-details div.pull-left",$(t)).html().match(/of (\d+) rows/)[1]}function datatableGetByForm(t){return $("table",$("#dt-top-details",$(t)).parent())}function datatableUndoAddRow(t,e,i,a){if(i)$(i).removeAttr("disabled");var n=$(t).closest("form");$(t).remove();aysUpdateForm(n);var r=datatableGetByForm(n);if(datatableIsEmpty(r))datatableAddEmptyRow(r,e);if(a)window[a](t)}function datatableForEachRow(t,e){$("tr:not(:first)",t).each(function(t){if(typeof e==="function"){e.bind(this)(t)}else{var i;for(i=0;i<e.length;i++)e[i].bind(this)(t)}})}function datatableAddButtonCallback(t,e,i,a,n){$("td:nth-child("+t+")",$(this)).append('<a href="'+n+'" class="add-on btn" style="padding:0.2em;" onclick="'+a+'" role="button"><span class="label '+i+'">'+e+"</span></a>")}function datatableAddDeleteButtonCallback(t,e,i){datatableAddButtonCallback.bind(this)(t,i,"label-danger",e,"javascript:void(0)")}function datatableAddActionButtonCallback(t,e,i){datatableAddButtonCallback.bind(this)(t,i,"label-info",e,"javascript:void(0)")}function datatableAddLinkButtonCallback(t,e,i){datatableAddButtonCallback.bind(this)(t,i,"label-info","",e)}function datatableMakeSelectUnique(t,e,i){i=paramsExtend({on_change:$.noop,selector_fn:function(t){return t.find("select").first()}},i);function a(t,e,i,a){$("[id^="+e+"]").each(function(){var e=i($(this));if(e[0]!=t[0])a(e)})}function n(t,e){if(e){t.removeAttr("disabled")}else{var i=t.closest("select");var a=i.val()==t.val();t.attr("disabled","disabled");if(a){var n=i.find("option:not([disabled])").first().val();i.val(n);i.attr("data-old-val",n)}}}function r(t,e,i){var r=$(this).attr("data-old-val")||"";var o=$(this).val()||"";var s=[];if(r==o)r="";a($(this),t,e,function(t){n(t.find("option[value='"+r+"']"),true);n(t.find("option[value='"+o+"']"),false);s.push(t)});i($(this),r,o,s,n);$(this).attr("data-old-val",o)}function o(t,e,i){t.val("");a(t,e,i,function(t){t.trigger("change")});var n=t.find("option:not([disabled])").first();var r=n.val();t.val(r);t.trigger("change")}var s=i.selector_fn(t);s.on("change",function(){r.bind(this)(e,i.selector_fn,i.on_change)});s.on("remove",function(){$(this).val("").trigger("change")});o(s,e,i.selector_fn)}function datatableOrderedInsert(t,e,i,a,n){var n=n||function(t,e){return e-t};var r=false;datatableForEachRow(t,function(){if(r)return;var t=$(this);var o=parseInt($("td:nth-child("+e+")",t).html());if(!isNaN(o)&&n(o,a)<0){t.before(i);r=true}});if(!r)$(t).append(i)}function datatableIsLastPage(t){var e=$("#dt-bottom-details .pagination li:nth-last-child(3)",$(t));return!(e.length==1&&e.hasClass("active")==false)}function aysHandleForm(t,e){if(!t)t="form";if(t==="form"){t='form:not([data-ays-ignore="true"])'}var i={submit_selector:'button[type="submit"]:not([data-ays-ignore="true"])',on_dirty_callback:$.noop,on_clean_callback:$.noop,handle_submit_buttons:true,handle_datatable:false,handle_tabs:false,disable_on_dirty:"",ays_options:{}};var a=$.extend(true,{},i,e);a.form_selector=t;$(function(){$(a.form_selector).areYouSure(a.ays_options);if(a.handle_submit_buttons)$(a.form_selector).find(a.submit_selector).attr("disabled","disabled");$(a.form_selector).on("dirty.areYouSure",function(){if(a.handle_submit_buttons)$(this).find(a.submit_selector).removeAttr("disabled");if(a.handle_datatable){$(this).find("a.dropdown-toggle").attr("disabled","disabled");$(this).find("ul.pagination a").css("pointer-events","none").css("cursor","default")}if(a.handle_tabs){$(".nav-tabs").find("a").each(function(){if(!$(this).closest("li").hasClass("active"))$(this).removeAttr("data-toggle").closest("li").addClass("disabled")})}$(a.disable_on_dirty).addClass("disabled");a.on_dirty_callback.bind(this)()});$(a.form_selector).on("clean.areYouSure",function(){if(a.handle_submit_buttons)$(this).find(a.submit_selector).attr("disabled","disabled");if(a.handle_datatable){$(this).find("a.dropdown-toggle").removeAttr("disabled");$(this).find("ul.pagination a").css("pointer-events","").css("cursor","")}if(a.handle_tabs){$(".nav-tabs").find("a").each(function(){$(this).attr("data-toggle","tab").closest("li").removeClass("disabled")})}$(a.disable_on_dirty).removeClass("disabled");a.on_clean_callback.bind(this)()})})}function aysResetForm(t){$(t).trigger("reinitialize.areYouSure")}function aysUpdateForm(t){$(t).trigger("rescan.areYouSure")}function aysRecheckForm(t){$(t).trigger("checkform.areYouSure")}function aysGetDirty(t,e){e=e||":input:not(input[type=submit]):not(input[type=button])";var i=function(t){if(t.hasClass("ays-ignore")||t.hasClass("aysIgnore")||t.attr("data-ays-ignore")||t.attr("name")===undefined){return null}if(t.is(":disabled")){return"ays-disabled"}var e;var i=t.attr("type");if(t.is("select")){i="select"}switch(i){case"checkbox":case"radio":e=t.is(":checked");break;case"select":e="";t.find("option").each(function(t){var i=$(this);if(i.is(":selected")){e+=i.val()}});break;default:e=t.val()}return e};var a=function(t){var e=t.data("ays-orig");var a=i(t);var n=undefined!==e&&e!=a;return{dirty:n,origValue:e,curValue:a}};var n=[];$(t).find(e).each(function(){var t=a($(this));if(t.dirty){t.input=$(this);n.push(t)}});return n}function is_good_ipv4(t){if(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])$/.test(t)){return true}else{return false}}function is_good_ipv6(t){if(/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\:){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(t)){return true}else{return false}}function isNumeric(t){return/^\d+$/.test(t)}function is_mac_address(t){return/^([0-9A-Fa-f]{2}:){5}([0-9A-Fa-f]{2})$/.test(t)}function is_network_mask(t,e){var i=t.split("/");var a=null;var n;if(i.length!=2){if(!e)return null;else n=t}else{n=i[0];if(!isNumeric(i[1]))return null;a=parseInt(i[1]);if(a<0)return null}if(is_good_ipv4(n)){if(a===null)a=32;else if(a>32)return null;return{type:"ipv4",address:n,mask:a}}else if(is_good_ipv6(i[0])){if(a===null)a=128;else if(a>128)return false;return{type:"ipv6",address:n,mask:a}}return null}function makeUniqueValidator(t){return function(e){var i=e.val();var a=0;if(!i)return true;t(e).each(function(){var t=$(this).val();if(t==i)a=a+1});return a==1}}function fbits(t){var e=["bps","kbit/s","Mbit/s","Gbit/s","Tbit/s"];if(t<=0)return"0";var i=Math.log(t)/Math.log(1e3);var a=parseInt(Math.floor(i));if(a<0||isNaN(a)){a=0}else if(a>=e.length){return"> "+e[e.length-1]}if(a<=1){return Math.round(t/Math.pow(1e3,a)*100)/100+" "+e[a]}else{var n=parseFloat(t/Math.pow(1e3,a)).toFixed(2);if(n%1==0)n=Math.round(n);return n+" "+e[a]}}function fpackets(t){var e=["pps","Kpps","Mpps","Gpps","Tpps"];if(t==0)return"0";var i=parseInt(Math.floor(Math.log(t)/Math.log(1e3)));if(i<0||isNaN(i)){i=0}return Math.round(t/Math.pow(1e3,i)*100)/100+" "+e[i]}function fflows(t){var e=["fps","Kfps","Mfps","Gfps","Tfps"];if(t==0)return"0";var i=parseInt(Math.floor(Math.log(t)/Math.log(1e3)));if(i<0||isNaN(i)){i=0}return Math.round(t/Math.pow(1e3,i)*100)/100+" "+e[i]}function fint(t){var e=Math.round(t);return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function fdate(t){var e=t*1e3;var i=new Date(e);return i}function capitaliseFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}String.prototype.startsWith=function(t){return this.indexOf(t)===0};function get_trend(t,e){if(e===undefined||t==e){return'<i class="fa fa-minus"></i>'}else{return'<i class="fa fa-arrow-up"></i>'}}function getOSIcon(t){var e="";if(t.search("Linux")!=-1||t.search("Ubuntu")!=-1)e="<i class='fa fa-linux fa-lg'></i> ";else if(t.search("Android")!=-1)e="<i class='fa fa-android fa-lg'></i> ";else if(t.search("Windows")!=-1||t.search("Win32")!=-1||t.search("MSIE")!=-1)e="<i class='fa fa-windows fa-lg'></i> ";else if(t.search("iPhone")!=-1||t.search("iPad")!=-1||t.search("OS X")!=-1)e="<i class='fa fa-apple fa-lg'></i> ";return e}function abbreviateString(t,e){if(!t)return"";if(t.length<e)return t;return t.substring(0,e)+"..."}function bytesToSize(t){var e=2;var i=1024;var a=i*1024;var n=a*1024;var r=n*1024;if(t>=0&&t<i)return t+" Bytes";else if(t>=i&&t<a)return(t/i).toFixed(e)+" KB";else if(t>=a&&t<n)return(t/a).toFixed(e)+" MB";else if(t>=n&&t<r)return(t/n).toFixed(e)+" GB";else if(t>=r)return(t/r).toFixed(e)+" TB";else return t+" Bytes"}String.prototype.capitalizeSingleWord=function(){var t=this.toUpperCase();if(t=="ASN"||t=="OS")return t;else return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.capitalize=function(){var t=this.split(" ");for(var e in t){t[e]=t[e].capitalizeSingleWord()}return t.join(" ")};function drawTrend(t,e,i){if(t==e){return'<i class="fa fa-minus"></i>'}else if(t>e){return'<i class="fa fa-arrow-up"'+i+"></i>"}else{return'<i class="fa fa-arrow-down"></i>'}}function toggleAllTabs(t){if(t===true)$("#historical-tabs-container").find("li").removeClass("disabled").find("a").attr("data-toggle","tab");else $("#historical-tabs-container").find("li").addClass("disabled").find("a").removeAttr("data-toggle")}function disableAllDropdownsAndTabs(){$("select").each(function(){$(this).prop("disabled",true)});toggleAllTabs(false)}function enableAllDropdownsAndTabs(){$("select").each(function(){$(this).prop("disabled",false)});toggleAllTabs(true)}function capitalize(t){return t&&t[0].toUpperCase()+t.slice(1)}function addCommas(t){t+="";var e=t.split(".");var i=e[0];var a=e.length>1?"."+e[1]:"";var n=/(\d+)(\d{3})/;while(n.test(i)){i=i.replace(n,"$1"+","+"$2")}return i+a}function formatPackets(t){return addCommas(t)+" Pkts"}function bytesToVolume(t){var e=["Bytes","KB","MB","GB","TB"];if(t==0)return"0 Bytes";var i=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return(t/Math.pow(1024,i)).toFixed(2)+" "+e[i]}function bytesToVolumeAndLabel(t){var e=["Bytes","KB","MB","GB","TB"];if(t==0)return"0 Bytes";var i=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return[(t/Math.pow(1024,i)).toFixed(2),e[i]]}function bitsToSize(t,e){var i=["bit/s","kbit/s","Mbit/s","Gbit/s","Tbit/s"];if(t==0)return"0 bps";var a=parseInt(Math.floor(Math.log(t)/Math.log(1e3)));if(a==0)return t+" "+i[a];return(t/Math.pow(e,a)).toFixed(2)+" "+i[a]}function secondsToTime(t){if(t<1){return"< 1 sec"}var e=Math.floor(t/86400);var i=Math.floor(t/3600-e*24);var a=Math.floor(t/60-e*1440-i*60);var n=t%60;var r="",o=[];if(e>0){years=Math.floor(e/365);if(years>0){e=e%365;r=years+" year";if(years>1){r+="s"}o.push(r);r=""}r=e+" day";if(e>1){r+="s"}o.push(r);r=""}if(i>0){r=i+" hour";if(i>1){r+="s"}o.push(r);r=""}if(a>0){o.push(a+" min")}if(n>0){o.push(n+" sec")}return o.join(", ")}Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(t))t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));for(var i in e)if(new RegExp("("+i+")").test(t))t=t.replace(RegExp.$1,RegExp.$1.length==1?e[i]:("00"+e[i]).substr((""+e[i]).length));return t};function epoch2Seen(t){var e=new Date(t*1e3);var i=Math.floor((new Date).getTime()/1e3-t);return e.format("dd/MM/yyyy hh:mm:ss")+" ["+secondsToTime(i)+" ago]"}function graphGetXAxisTicksFormat(t){var e;if(t<=86400){e="%H:%M:%S"}else if(t<=2*86400){e="%b %e, %H:%M:%S"}else{e="%b %e"}return e}function graphGetHeaderTicksFormat(t){var e;e="%b %e, %H:%M:%S";return e}function nvGraphSetXTicksFormat(t,e){t.interactiveLayer.tooltip.headerFormatter(function(t){return d3.time.format(graphGetHeaderTicksFormat(e))(new Date(t*1e3))});t.xAxis.tickFormat(function(t){return d3.time.format(graphGetXAxisTicksFormat(e))(new Date(t*1e3))})}function paramsExtend(t,e){return $.extend({},t,e)}function paramsToForm(t,e){t=$(t);for(var i in e){if(e.hasOwnProperty(i)){var a=$('<input type="hidden" name="'+i+'" value="'+e[i]+'">');a.appendTo(t)}}return t}function paramsPairsEncode(t){var e=0;var i={};for(var a in t){i["key_"+e]=a;i["val_"+e]=t[a];e=e+1}return i}jQuery.fn.extend({disable:function(t){return this.each(function(){var e=$(this);if(e.is("input, button, textarea, select"))this.disabled=t;else e.toggleClass("disabled",t)})}});function hostkey2hostInfo(t){var e;var i=[];t=t.replace(/____/g,":");t=t.replace(/___/g,"/");t=t.replace(/__/g,".");e=t.split("@");return e}function handle_tab_state(t,e){$("a",t).click(function(t){t.preventDefault()});$(" > li > a",t).on("shown.bs.tab",function(t){var e=$(t.target).attr("href").substr(1);if(history.replaceState){history.replaceState(null,null,"#"+e)}else{window.location.hash=e}});var i=window.location.hash;if(!i)i="#"+e;$('a[href="'+i+'"]',t).tab("show")}if(typeof Math.sign==="undefined"){Math.sign=function(t){return t>=0?1:-1}}function memberValueValidator(t){var e=t.val();if(e==="")return true;return is_mac_address(e)||is_network_mask(e,true)}function makeFindHostBeforeSubmitCallback(t){return function(e,i){if(i.isMac)e.attr("action",t+"/lua/mac_details.lua");else e.attr("action",t+"/lua/host_details.lua");return true}}
//# sourceMappingURL=ntop.min.js.map